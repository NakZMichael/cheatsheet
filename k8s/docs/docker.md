# Dockerイメージを作成するときに気をつけるべきこと

- 1コンテナにつき1プロセス
  - Dockerはアプリケーションが主役になるように設計されている。(周辺のエコシステムも含めて)
  - 仮装OSのように使うのは正しくない
- Immutable Infrastructureなイメージにする
  - 環境を変更するときは古い環境は破棄して新たに作る。(バッチを当てて設定を変更したりはしない)
  - 一度作られた環境は変更されないことを徹底する(ビルド時以外に`npm install`などはしない)
- 軽量なDockerイメージにする
  - マルチステージビルド
- 実行ユーザーをroot以外にする