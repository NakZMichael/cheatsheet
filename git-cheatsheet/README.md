# git関連のCheatSheet

頻繁に忘れるのでメモとしてこのファイルに書いておく。

結構マジでgitの理解が浅かったと反省しているので[このチュートリアル](http://k.swd.cc/learnGitBranching-ja/)で学習し直す。

## 基本知識

- gitは差分を記録している。
- **早めに、かつ頻繁にブランチを切りなさい**

### HEAD

HEADはいまチェックアウトされているコミットのこと。

- `git checkout HEAD^`で直前のコミットに移動することができる。
  - `(特定のコミット)^`は"特定のコミット"の直前を表す。
- `git checkout HEAD~(移動したい数)`で現在のコミットから"移動したい数"だけ前のコミットに移動することができる。

### fast-forward merge

Git のファストフォワードマージとは, マージされるブランチの HEAD をマージするブランチの先端にそのまま移動させるマージを指します。


# コマンド集

## branch(ブランチを切る)

- `git branch (新規ブランチ名)`でブランチを切れる
- `git branch -f master HEAD~3`でmasterブランチをHEADから数えて3個前の親コミットへと強制的に移動することができる。



## checkout(ブランチ間を移動する)

- `git checkout (移動したいブランチ名)`でブランチ間を移動できる。
- `git checkout -b (新規ブランチ名)`でブランチの作成と移動を一括で行える。
- `git checkout (移動したいコミットのハッシュ値)`でコミットを指定して移動することができる。

## merge(安全に二つのブランチを統合する)

- 統合されるブランチに移動して`git merge (統合したいブランチ)`で統合されるブランチに統合したいブランチの変更を取り込むことができる。

## rebase(スッキリと二つのブランチを統合する)

- 統合されるブランチに移動して`git merge (統合したいブランチ)`で統合されるブランチに統合したいブランチの変更を取り込むことができる。
- `merge`と違って統合されるブランチの履歴を書き換えるので明確な目的がない場合は`merge`を使用した方が安全

## reset(localのcommitを取り消す)

- local上のcommitを取り消してなかったことにする。
- `git reset HEAD~3`で直近の3回分のコミットを取り消すことができる。

## revert

- `git revert (取り消したいコミット)`で取り消したいコミットを打ち消すコミットが作成される。

## cherry-pick

- `git cherry-pick (取り込みたいコミットのハッシュ値)`で取り込みたいコミットの差分だけを取り込むことができる。

## stash

まだコミットしていない変更内容や新しく追加したファイルが、インデックスやワークツリーに残ったままで、他のブランチへのチェックアウトを行うと、その変更内容は元のブランチから、移動先のブランチに対して移動します。

ただし、移動先のブランチで、同じファイルが既に何らかの変更が行われている場合はチェックアウトに失敗します。このような場合は、変更内容を一度コミットするか、またはstashを使って一時的に変更内容を退避させてからチェックアウトしなければなりません。

stashとは、ファイルの変更内容を一時的に記録しておく領域です。stashを使うことで、ワークツリーとインデックス中でまだコミットされていない変更を一時的に退避させることができます。退避させた変更は後から取り出して、元のブランチや別のブランチに反映させることができます。

## add(ファイルを追加する)

- `git add (ファイル名)`でファイルもしくはフォルダをgit管理に追加することができる。`git add .`で全ての変更をstageすることができる。

